<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M28.379%2021.293c.011-.273.214-.475.511-.481a.5.5%200%200%201%20.489.503l.044%201.393c.097.551.695%201.215%201.566%201.704.577.428%201.306.486%202.193.182%201.426-.617%202.467-1.654%203.304-2.487l.173-.172a3.43%203.43%200%200%201%20.365-.306.49.49%200%200%201%20.286-.196c1.718-1.06%204.931-1.47%207.353.191l.219.15c1.707%201.187%203.413%202.131%204.328%201.03.02-.027.49-.685.141-1.763-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.622%202.042%202.515%208.257-1.727%2010.643-1.614.908-3.06%201.248-4.317%201.248-2.665%200-4.492-1.524-5.322-2.401-1.476-1.559-2.886-1.854-6.491.82-1.877%201.393-3.514%201.753-4.861%201.068-2.223-1.713-2.811-3.867-3.399-6.374-.077-.846-.056-1.469-.054-1.537zm4.835%204.313c.054.305.156.586.242.629.034-.007.131-.022.307-.157.145-.111.314-.478.456-.908-.221.121-.432.25-.675.355-.115.039-.219.051-.33.081zm2.251-1.238c.05.33.158.648.252.694.022.001.125-.018.307-.157.217-.166.488-.906.639-1.573-.358.344-.754.693-1.198%201.036zm3.887-2.337c.006-.116.018-.231.041-.342-.635.145-1.189.368-1.599.625-.097.231-.166.481-.174.642.03.049.055.101.067.158.046.013.128.026.298.004.278-.037.901-.57%201.367-1.087zm1.127-.497c-.116.306-.176.625-.12.71.019.014.117.045.345.016.206-.027.604-.332.986-.695-.41-.051-.816-.056-1.211-.031zm4.535%201.535c-.209.22-.379.47-.358.598.006.041.088.138.351.234.144.055.539-.063.979-.259a11.66%2011.66%200%200%201-.972-.573zm-.983-.664c-.359-.237-.738-.418-1.126-.554-.25.237-.479.548-.457.694.006.042.087.138.351.235.174.064.694-.105%201.232-.375zm3.381%201.794c.022.145.061.29.149.401.133.166.358.248.69.251h.002c.133%200%20.306-.26.45-.621-.417.091-.854.07-1.291-.031zm2.066-8.077a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378l.105.962zm.331%202.302a10.32%2010.32%200%200%200%20.828-.502c-.202-.143-.576-.328-.984-.49l.156.992zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376a11.57%2011.57%200%200%200%20.19.779zm.181%201.716c-.064.398-.194.702-.298.893.194-.051.435-.162.736-.398-.061-.119-.224-.3-.438-.495zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zM32.283%2028.313c.985.498%202.267.168%203.813-.979%203.073-2.281%205.453-3.199%207.813-.705%201.315%201.391%204.163%203.365%208.423.97%203.174-1.786%202.239-6.266%201.261-9.479l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837-.219.203-.415.364-.598.501.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787-.213.144-.395.26-.564.365%201.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.473.389.971.914.999%201.429.018.278-.095.532-.316.713-.675.556-1.231.721-1.653.721-.059%200-.104-.014-.158-.02-.207.707-.641%201.64-1.513%201.64h-.013c-.8-.008-1.236-.345-1.462-.626-.173-.216-.268-.457-.325-.692-.424.195-.93.374-1.372.374-.151%200-.294-.021-.423-.068-.732-.27-.944-.704-.993-1.021-.009-.061-.003-.119-.002-.179-.266.086-.538.147-.789.147-.15%200-.294-.021-.423-.069-.542-.2-.797-.489-.914-.754-.237.147-.478.258-.704.288-.106.014-.205.021-.296.021-.356%200-.595-.101-.767-.229-.438.435-1.094.992-1.656%201.067-.106.014-.205.021-.296.021a1.56%201.56%200%200%201-.323-.035c-.17.575-.453%201.289-.866%201.605-.358.273-.665.362-.914.362a.99.99%200%200%201-.421-.093%201.03%201.03%200%200%201-.245-.164c-.168.428-.39.846-.68%201.068-.358.273-.665.362-.913.362a.99.99%200%200%201-.421-.093c-.317-.148-.512-.448-.639-.762-.251.157-.495.257-.726.257-.127%200-.25-.024-.37-.071-.427-.17-.706-.617-.841-1.314-.022-.015-.047-.022-.068-.038-.067-.051-.133-.104-.196-.159.443%201.486%201.107%202.761%202.086%203.257zM49.34%209.925a.5.5%200%201%201%201%200c0%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205a.5.5%200%201%201%201%200c0%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-4.4%2015.965l.208.097c2.661%201.258%204.708%201.436%206.086.527%201.542-1.017%201.88-3.19%201.844-4.198a.4.4%200%200%201%20.385-.414c.242-.029.406.164.414.385.046%201.249-.367%203.686-2.202%204.896-.708.467-1.547.7-2.51.7-1.248%200-2.706-.392-4.362-1.174l-.185-.086a.4.4%200%200%201-.205-.527c.089-.204.326-.291.527-.206zm3.513-23.598c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703l-1.364%201.124zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893a.5.5%200%201%201%20.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>

    <title>pdoc.extract API documentation</title>

    
    <style type="text/css">/*!
 * Bootstrap Reboot v5.0.0-beta1 (https://getbootstrap.com/)
 * Copyright 2011-2020 The Bootstrap Authors
 * Copyright 2011-2020 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md)
 */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus{outline:dotted 1px;outline:-webkit-focus-ring-color auto 5px}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    
    <style type="text/css">pre { line-height: 125%; }td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }.codehilite .hll { background-color: #ffffcc }.codehilite .c { color: #408080; font-style: italic } /* Comment */.codehilite .err { border: 1px solid #FF0000 } /* Error */.codehilite .k { color: #008000; font-weight: bold } /* Keyword */.codehilite .o { color: #666666 } /* Operator */.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */.codehilite .gd { color: #A00000 } /* Generic.Deleted */.codehilite .ge { font-style: italic } /* Generic.Emph */.codehilite .gr { color: #FF0000 } /* Generic.Error */.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */.codehilite .gi { color: #00A000 } /* Generic.Inserted */.codehilite .go { color: #888888 } /* Generic.Output */.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */.codehilite .gs { font-weight: bold } /* Generic.Strong */.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */.codehilite .gt { color: #0044DD } /* Generic.Traceback */.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */.codehilite .kp { color: #008000 } /* Keyword.Pseudo */.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */.codehilite .kt { color: #B00040 } /* Keyword.Type */.codehilite .m { color: #666666 } /* Literal.Number */.codehilite .s { color: #BA2121 } /* Literal.String */.codehilite .na { color: #7D9029 } /* Name.Attribute */.codehilite .nb { color: #008000 } /* Name.Builtin */.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */.codehilite .no { color: #880000 } /* Name.Constant */.codehilite .nd { color: #AA22FF } /* Name.Decorator */.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */.codehilite .nf { color: #0000FF } /* Name.Function */.codehilite .nl { color: #A0A000 } /* Name.Label */.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */.codehilite .nv { color: #19177C } /* Name.Variable */.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */.codehilite .w { color: #bbbbbb } /* Text.Whitespace */.codehilite .mb { color: #666666 } /* Literal.Number.Bin */.codehilite .mf { color: #666666 } /* Literal.Number.Float */.codehilite .mh { color: #666666 } /* Literal.Number.Hex */.codehilite .mi { color: #666666 } /* Literal.Number.Integer */.codehilite .mo { color: #666666 } /* Literal.Number.Oct */.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */.codehilite .sc { color: #BA2121 } /* Literal.String.Char */.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */.codehilite .sx { color: #008000 } /* Literal.String.Other */.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */.codehilite .ss { color: #19177C } /* Literal.String.Symbol */.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */.codehilite .fm { color: #0000FF } /* Name.Function.Magic */.codehilite .vc { color: #19177C } /* Name.Variable.Class */.codehilite .vg { color: #19177C } /* Name.Variable.Global */.codehilite .vi { color: #19177C } /* Name.Variable.Instance */.codehilite .vm { color: #19177C } /* Name.Variable.Magic */.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */</style><style type="text/css">/* General Styles */:root {--main-pad: calc(min(3rem, 3vw));}html, main {scroll-behavior: smooth;}h1, h2, h3, h4 {font-weight: 300;margin: .5em 0 .5em;}a {text-decoration: none;color: #3660a5;}code {color: #24292e;padding: .2em .4em;margin: 0;font-size: 85%;background-color: rgba(27, 31, 35, 0.05);border-radius: 6px;}.button {display: inline-block;border: solid black 1px;border-radius: 2px;font-size: .75rem;padding: calc(0.5em - 1px) 1em;transition: 100ms all;}/* Responsive Layout */html, body {width: 100%;height: 100%;}@media (max-width: 769px) {label[for=navtoggle] {cursor: pointer;float: right;width: 50px;height: 40px;margin-top: 1rem;color: rgba(0, 0, 0, .55);border-color: rgba(0, 0, 0, .1);background-repeat: no-repeat;background-position: center center;background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%280, 0, 0, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");}main {padding-top: 2rem !important;}label[for=navtoggle]:hover {border-color: rgba(0, 0, 0, .5);}#navtoggle + div {display: none;}#navtoggle:checked + div {display: inherit;}.git-button {display: none !important;}}@media (min-width: 770px) {.container {display: flex;}.container, nav, main {height: 100%;overflow: auto;}nav {flex: 200px;min-width: 12.5rem;max-width: 22rem;}main {flex: 600px;padding-right: calc(max(var(--main-pad), 100% - 22rem - 50rem)) !important;}label[for=navtoggle] {display: none;}}#navtoggle {display: none;}/* Nav */nav {--pad: 1.75rem;--indent: 1.5rem;background-color: #eee;border-right: 1px solid #c1c1c1;box-shadow: 0 0 20px rgba(50, 50, 50, .2) inset;padding: 0 var(--pad);}nav > div {padding: var(--pad) 0;}nav::-webkit-scrollbar {width: 10px;}nav {scrollbar-width: thin;}nav::-webkit-scrollbar-thumb {background-color: #c1c1c1;}.module-list-button {background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22currentColor%22%20class%3D%22bi%20bi-box-arrow-in-left%22%20viewBox%3D%220%200%2016%2016%22%3E%0A%20%20%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M10%203.5a.5.5%200%200%200-.5-.5h-8a.5.5%200%200%200-.5.5v9a.5.5%200%200%200%20.5.5h8a.5.5%200%200%200%20.5-.5v-2a.5.5%200%200%201%201%200v2A1.5%201.5%200%200%201%209.5%2014h-8A1.5%201.5%200%200%201%200%2012.5v-9A1.5%201.5%200%200%201%201.5%202h8A1.5%201.5%200%200%201%2011%203.5v2a.5.5%200%200%201-1%200v-2z%22/%3E%0A%20%20%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M4.146%208.354a.5.5%200%200%201%200-.708l3-3a.5.5%200%201%201%20.708.708L5.707%207.5H14.5a.5.5%200%200%201%200%201H5.707l2.147%202.146a.5.5%200%200%201-.708.708l-3-3z%22/%3E%0A%3C/svg%3E");background-position: 1em center;background-repeat: no-repeat;color: #333;border-color: #999;padding-left: calc(1em + 18px);margin-bottom: 1rem;}.module-list-button:hover {border-color: black;}nav ul {list-style: none;padding-left: 0;}nav li {display: block;margin: 0;padding: .2rem 0;padding-left: var(--indent);transition: all 100ms;}nav > div > ul > li {padding-left: 0;}nav li:hover {background-color: rgba(255, 255, 255, 0.5);}nav a {color: #333;display: block;}nav .class:before, .inherited .class:before {content: "class ";color: gray;}nav > h2:first-of-type {margin-top: 1.5rem;}nav .function:after, .inherited .function:after {content: "()";color: gray;}/* Content */main {padding: var(--main-pad);}main > section:first-of-type .docstring {margin-bottom: 3rem;}.git-button {float: right;border: solid #3273dc 1px;}.git-button:hover {background-color: #3273dc;color: white;}.modulename {margin-top: 0;font-weight: bold;}.modulename a {color: #3660a5;transition: 100ms all;}.modulename a:hover {color: #1659c5;}details {--shift: -40px;text-align: right;margin-top: var(--shift);margin-bottom: calc(0px - var(--shift));clear: both;}details:not([open]) {height: 0;overflow: visible;}summary.button {color: #666;border-width: 0;padding: 0 .7em;display: inline-block;user-select: none;}summary:focus {outline: 0;}details > div {margin-top: calc(0px - var(--shift) / 2);text-align: left;}.codehilite {background-color: #f7f7f7;border-top: 1px solid #ccc;border-bottom: 1px solid #ccc;margin-bottom: .5em;}.codehilite code {padding: 0;background: none;}.codehilite pre {margin: 0;padding: .5rem 0 .5rem .5rem;}.docstring .codehilite {margin-left: 1em;margin-right: 1em;}.docstring {margin-bottom: 1.5rem;}div:target > .attr, section:target > .attr {background-color: #fff598;}.attr:hover {background-color: #dadada;}.attr {color: black;margin: 1rem 0 .5rem;/*lots of padding on the right to accomodate view source button.This is not ideal, but probably good enough for now.*/padding: .4rem 5rem .4rem 1rem;background-color: #eee;}.classattr, .inherited {margin-left: 2rem;}.name {color: #0066BB;font-weight: bold;}.def {color: #008800;font-weight: bold;}.function .signature {white-space: pre-wrap;}.annotation {color: #007020;}dt, dd {display: inline;}dd + dd:before {content: ", ";}.int, .nonetype {color: #666;}.str {color: #BA2121;}/* pdoc logo */.logo {margin-top: 2rem;display: block;opacity: 0.5;transition: all 200ms;filter: grayscale(100%);}.logo:hover {opacity: 1;filter: grayscale(0%);}.logo svg {margin-left: 5px;height: 35px;width: 70px;transition: all 200ms;}</style>
</head>
<body>

    <div class="container">
        
            <nav>
                <label for="navtoggle" class="button"></label>
                <input id="navtoggle" type="checkbox">
                <div>
                    
                    
                            <a class="button module-list-button" href="../pdoc.html">
                                pdoc</a>
                        
                    

                    
                    

                    

                    
                        <h2>API Documentation</h2>
                        <ul class="memberlist">
            
                <li><a class="function" href="#mock_some_common_side_effects">mock_some_common_side_effects</a></li>
            
                <li><a class="function" href="#parse_specs">parse_specs</a></li>
            
                <li><a class="function" href="#parse_spec">parse_spec</a></li>
            
                <li><a class="function" href="#load_module">load_module</a></li>
            
                <li><a class="function" href="#module_mtime">module_mtime</a></li>
            
                <li><a class="function" href="#invalidate_caches">invalidate_caches</a></li>
            
        </ul>
                    

                    <a class="logo" title="built with pdoc" href="https://pdoc.dev">
                        built with <svg xmlns="http://www.w3.org/2000/svg" width="300" height="150" viewBox="-1 0 60 30" class="pdoc-logo"><path d="M29.621 21.293c-.011-.273-.214-.475-.511-.481a.5.5 0 0 0-.489.503l-.044 1.393c-.097.551-.695 1.215-1.566 1.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43 3.43 0 0 0-.365-.306.49.49 0 0 0-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707 1.187-3.413 2.131-4.328 1.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351 1.378-1.008 2.271-2.586 2.271-4.362 0-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516 0-1.477-1.202-2.679-2.679-2.679-.791 0-1.496.352-1.987.9a6.3 6.3 0 0 0-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477 0-2.679 1.202-2.679 2.679A2.65 2.65 0 0 0 .97 6.554c-.383.747-.595 1.572-.595 2.41 0 2.311 1.507 4.29 3.635 5.107-.037.699-.147 2.27-.423 3.294l-.137.461c-.622 2.042-2.515 8.257 1.727 10.643 1.614.908 3.06 1.248 4.317 1.248 2.665 0 4.492-1.524 5.322-2.401 1.476-1.559 2.886-1.854 6.491.82 1.877 1.393 3.514 1.753 4.861 1.068 2.223-1.713 2.811-3.867 3.399-6.374.077-.846.056-1.469.054-1.537zm-4.835 4.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693 1.198 1.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145 1.189.368 1.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056 1.211-.031zm-4.535 1.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66 11.66 0 0 0 .972-.573zm.983-.664c.359-.237.738-.418 1.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381 1.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133 0-.306-.26-.45-.621.417.091.854.07 1.291-.031zm-2.066-8.077a4.78 4.78 0 0 1-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331 2.302a10.32 10.32 0 0 1-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45 2.157l-.701-.403c.214-.115.536-.249.891-.376a11.57 11.57 0 0 1-.19.779zm-.181 1.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87 4.141c0 .152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15 1.15 0 0 0-.314.783 1.16 1.16 0 0 0 1.162 1.162c.457 0 .842-.27 1.032-.653.026.117.042.238.042.362a1.68 1.68 0 0 1-1.679 1.679 1.68 1.68 0 0 1-1.679-1.679c0-.843.626-1.535 1.436-1.654zM5.059 5.406A1.68 1.68 0 0 1 3.38 7.085a1.68 1.68 0 0 1-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16 1.16 0 0 0 1.162-1.162 1.14 1.14 0 0 0-.474-.912c.015 0 .03-.005.045-.005.926.001 1.679.754 1.679 1.68zM3.198 4.141c0 .152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375 8.964c0-.52.103-1.035.288-1.52.466.394 1.06.64 1.717.64 1.144 0 2.116-.725 2.499-1.738.383 1.012 1.355 1.738 2.499 1.738.867 0 1.631-.421 2.121-1.062.307.605.478 1.267.478 1.942 0 2.486-2.153 4.51-4.801 4.51s-4.801-2.023-4.801-4.51zm24.342 19.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315 1.391-4.163 3.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11 6.11 0 0 0 1.18.115 6.01 6.01 0 0 0 2.536-.562l-.006.175c-.802.215-1.848.612-2.021 1.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311 1.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381 1.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999 1.429-.018.278.095.532.316.713.675.556 1.231.721 1.653.721.059 0 .104-.014.158-.02.207.707.641 1.64 1.513 1.64h.013c.8-.008 1.236-.345 1.462-.626.173-.216.268-.457.325-.692.424.195.93.374 1.372.374.151 0 .294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15 0 .294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356 0 .595-.101.767-.229.438.435 1.094.992 1.656 1.067.106.014.205.021.296.021a1.56 1.56 0 0 0 .323-.035c.17.575.453 1.289.866 1.605.358.273.665.362.914.362a.99.99 0 0 0 .421-.093 1.03 1.03 0 0 0 .245-.164c.168.428.39.846.68 1.068.358.273.665.362.913.362a.99.99 0 0 0 .421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127 0 .25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443 1.486-1.107 2.761-2.086 3.257zM8.66 9.925a.5.5 0 1 0-1 0c0 .653-.818 1.205-1.787 1.205s-1.787-.552-1.787-1.205a.5.5 0 1 0-1 0c0 1.216 1.25 2.205 2.787 2.205s2.787-.989 2.787-2.205zm4.4 15.965l-.208.097c-2.661 1.258-4.708 1.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4 0 0 0-.385-.414c-.242-.029-.406.164-.414.385-.046 1.249.367 3.686 2.202 4.896.708.467 1.547.7 2.51.7 1.248 0 2.706-.392 4.362-1.174l.185-.086a.4.4 0 0 0 .205-.527c-.089-.204-.326-.291-.527-.206zM9.547 2.292c.093.077.205.114.317.114a.5.5 0 0 0 .318-.886L8.817.397a.5.5 0 0 0-.703.068.5.5 0 0 0 .069.703l1.364 1.124zm-7.661-.065c.086 0 .173-.022.253-.068l1.523-.893a.5.5 0 0 0-.506-.863l-1.523.892a.5.5 0 0 0-.179.685c.094.158.261.247.432.247z" transform="matrix(-1 0 0 1 58 0)" fill="#3bb300"/><path d="M.3 21.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54 1.34-.54 1.06 0 1.42.28.38.26.44.78.76-1.04 2.38-1.04 1.64 0 3.1 1.54 1.46 1.54 1.46 3.58 0 2.04-1.46 3.58-1.44 1.54-3.08 1.54-1.64 0-2.38-.92v4.04q0 .46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62 0-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46 1.18 0 .64.46 1.18.48.52 1.2.52.74 0 1.24-.52.52-.52.52-1.18 0-.66-.48-1.18-.48-.54-1.26-.54-.76 0-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12 1-.12.64 0 1.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0 .46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38 0-1.54-.98-.84.96-2.34.96-1.8 0-3.28-1.56-1.48-1.58-1.48-3.66 0-2.1 1.48-3.68 1.5-1.58 3.28-1.58 1.48 0 2.3 1v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24 10.86q.52.54 1.26.54.74 0 1.22-.54.5-.54.5-1.18 0-.66-.48-1.22-.46-.56-1.26-.56-.8 0-1.28.56-.48.54-.48 1.2 0 .66.52 1.2zm7.833-1.2q0-2.4 1.68-3.96 1.68-1.56 3.84-1.56 2.16 0 3.82 1.56 1.66 1.54 1.66 3.94 0 1.66-.86 2.96-.86 1.28-2.1 1.9-1.22.6-2.54.6-1.32 0-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18 1.44q.64.48 1.3.48.66 0 1.32-.5.66-.5.66-1.48 0-.98-.62-1.46-.62-.48-1.34-.48-.72 0-1.34.5-.62.5-.62 1.48 0 .96.64 1.46zm11.412-1.44q0 .84.56 1.32.56.46 1.18.46.64 0 1.18-.36.56-.38.9-.38.6 0 1.46 1.06.46.58.46 1.04 0 .76-1.1 1.42-1.14.8-2.8.8-1.86 0-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36 0-1.3.52-2.34.52-1.06 1.34-1.7 1.66-1.32 3.54-1.32.76 0 1.48.22.72.2 1.06.4l.32.2q.36.24.56.38.52.4.52.92 0 .5-.42 1.14-.72 1.1-1.38 1.1-.38 0-1.08-.44-.36-.34-1.04-.34-.66 0-1.24.48-.58.48-.58 1.34z" fill="green"/></svg>
                    </a>
                </div>
            </nav>
        
        <main>
            
                <section>
                    
                        
                    
                    <h1 class="modulename"><a href="./../pdoc.html">pdoc</a>.extract</h1>
                    <div class="docstring"><p>This module handles the interaction with Python's module system,
that is it loads the correct module based on whatever the user specified,
and provides the rest of pdoc with some additional module metadata.</p>
</div>
                    <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module handles the interaction with Python&#39;s module system,</span>
<span class="sd">that is it loads the correct module based on whatever the user specified,</span>
<span class="sd">and provides the rest of pdoc with some additional module metadata.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">importlib.util</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">linecache</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pkgutil</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">sysconfig</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Collection</span><span class="p">,</span> <span class="n">Sequence</span>
<span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>


<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">mock_some_common_side_effects</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This context manager is applied when importing modules. It mocks some common side effects that may happen upon</span>
<span class="sd">    module import. For example, importing the builtin `antigravity` module normally causes a webbrowser to open,</span>
<span class="sd">    which we want to suppress. Note that this function must not be used for security purposes, it&#39;s easily bypassable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_popen</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span>

    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">noop_exe</span> <span class="o">=</span> <span class="s2">&quot;echo.exe&quot;</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">noop_exe</span> <span class="o">=</span> <span class="s2">&quot;echo&quot;</span>

    <span class="k">def</span> <span class="nf">noop</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;subprocess.Popen&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">_popen</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="n">noop_exe</span><span class="p">)),</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;os.startfile&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">noop</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;sys.stdout&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()),</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;sys.stderr&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="p">),</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;sys.stdin&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="p">):</span>
        <span class="k">yield</span>


<span class="nd">@mock_some_common_side_effects</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">parse_specs</span><span class="p">(</span><span class="n">modules</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function processes a list of module specifications and returns the list of module names</span>
<span class="sd">    that should be processed by pdoc.</span>

<span class="sd">    There are two main scenarios:</span>

<span class="sd">     2. If `modules` is not empty, pdoc will return the names of all available submodules (and their submodules, recursively).</span>
<span class="sd">     1. If the list of modules is empty, pdoc will enumerate all installed modules that are not part of the stdlib.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">module_index</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">modules</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">spec</span> <span class="ow">in</span> <span class="n">modules</span><span class="p">:</span>
            <span class="n">modname</span> <span class="o">=</span> <span class="n">parse_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>

            <span class="c1"># try to get all submodules</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">modspec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">modspec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ModuleNotFoundError</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span>
                <span class="n">module_index</span><span class="p">[</span><span class="n">modname</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">modspec</span><span class="o">.</span><span class="n">submodule_search_locations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">modspec</span><span class="o">.</span><span class="n">submodule_search_locations</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Cannot find spec for </span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2"> (from </span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">submodules</span> <span class="o">=</span> <span class="n">pkgutil</span><span class="o">.</span><span class="n">walk_packages</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">module_index</span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">submodules</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Error importing subpackage: </span><span class="si">{</span><span class="n">e</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span>
                        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stdlib</span> <span class="o">=</span> <span class="n">sysconfig</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;stdlib&quot;</span><span class="p">)</span>
        <span class="n">platstdlib</span> <span class="o">=</span> <span class="n">sysconfig</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;platstdlib&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">pkgutil</span><span class="o">.</span><span class="n">iter_modules</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">module_finder</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="n">stdlib</span><span class="p">,</span> <span class="n">platstdlib</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">module_index</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">module_index</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No valid module specifications found in </span><span class="si">{</span><span class="n">modules</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">module_index</span>


<span class="k">def</span> <span class="nf">parse_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This functions parses a user&#39;s module specification into a module identifier that can be imported.</span>
<span class="sd">    A module specification can either be the name of an installed module, or the path to a specific file or package.</span>
<span class="sd">    For example, the following strings are valid module specifications:</span>

<span class="sd">     - typing</span>
<span class="sd">     - collections.abc</span>
<span class="sd">     - ./test/snapshots/demo_long.py</span>
<span class="sd">     - ./test/snapshots/demopackage</span>

<span class="sd">    *This function has side-effects:* `sys.path` will be amended if the specification is a path.</span>
<span class="sd">    If this side-effect is undesired, pass a module name instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># isinstance check is required as Path is not iterable.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="ow">in</span> <span class="n">spec</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">altsep</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">altsep</span> <span class="ow">in</span> <span class="n">spec</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">spec</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">parse_spec</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">spec</span><span class="o">.</span><span class="n">stem</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">spec</span>


<span class="nd">@mock_some_common_side_effects</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">load_module</span><span class="p">(</span><span class="n">module</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to import a module. If import fails, a RuntimeError is raised.</span>

<span class="sd">    Returns the imported module.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error importing </span><span class="si">{</span><span class="n">module</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>


<span class="k">def</span> <span class="nf">module_mtime</span><span class="p">(</span><span class="n">modulename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Returns the time the specified module file was last modified, or `None` if this cannot be determined.</span>
<span class="sd">    The primary use of this is live-reloading modules on modification.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">spec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="n">modulename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">spec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">spec</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mtime</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span> <span class="nf">invalidate_caches</span><span class="p">(</span><span class="n">modules</span><span class="p">:</span> <span class="n">Collection</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Invalidate all module caches to allow live-reloading of modules.</span>
<span class="sd">    Getting this right is tricky  we remove a bunch of stuff from `sys.modules`, which sometimes causes surprising</span>
<span class="sd">    side-effects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">importlib</span><span class="o">.</span><span class="n">invalidate_caches</span><span class="p">()</span>
    <span class="n">linecache</span><span class="o">.</span><span class="n">clearcache</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">mod</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">modules</span>
    <span class="p">}</span>
</pre></div>

            </details>
                </section>
            
            
                
                    <section id="mock_some_common_side_effects">
                        
                            <div class="attr function"><div class="decorator">@contextmanager</div>
                <span class="def">def</span>
                <span class="name">mock_some_common_side_effects</span><span class="signature">()</span>:
            
        </div>
                        
                        
                            <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">mock_some_common_side_effects</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This context manager is applied when importing modules. It mocks some common side effects that may happen upon</span>
<span class="sd">    module import. For example, importing the builtin `antigravity` module normally causes a webbrowser to open,</span>
<span class="sd">    which we want to suppress. Note that this function must not be used for security purposes, it&#39;s easily bypassable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_popen</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span>

    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">noop_exe</span> <span class="o">=</span> <span class="s2">&quot;echo.exe&quot;</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="n">noop_exe</span> <span class="o">=</span> <span class="s2">&quot;echo&quot;</span>

    <span class="k">def</span> <span class="nf">noop</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">with</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;subprocess.Popen&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">_popen</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="n">noop_exe</span><span class="p">)),</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;os.startfile&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">noop</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">),</span> <span class="n">patch</span><span class="p">(</span><span class="s2">&quot;sys.stdout&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()),</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;sys.stderr&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="p">),</span> <span class="n">patch</span><span class="p">(</span>
        <span class="s2">&quot;sys.stdin&quot;</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="p">):</span>
        <span class="k">yield</span>
</pre></div>

            </details>
                        
                        <div class="docstring"><p>This context manager is applied when importing modules. It mocks some common side effects that may happen upon
module import. For example, importing the builtin <code>antigravity</code> module normally causes a webbrowser to open,
which we want to suppress. Note that this function must not be used for security purposes, it's easily bypassable.</p>
</div>
                        
                    </section>
                
                    <section id="parse_specs">
                        
                            <div class="attr function"><div class="decorator">@mock_some_common_side_effects()</div>
                <span class="def">def</span>
                <span class="name">parse_specs</span><span class="signature">(modules: Sequence[Union[pathlib.Path, str]]) -&gt; dict[str, None]</span>:
            
        </div>
                        
                        
                            <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="nd">@mock_some_common_side_effects</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">parse_specs</span><span class="p">(</span><span class="n">modules</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function processes a list of module specifications and returns the list of module names</span>
<span class="sd">    that should be processed by pdoc.</span>

<span class="sd">    There are two main scenarios:</span>

<span class="sd">     2. If `modules` is not empty, pdoc will return the names of all available submodules (and their submodules, recursively).</span>
<span class="sd">     1. If the list of modules is empty, pdoc will enumerate all installed modules that are not part of the stdlib.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">module_index</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">modules</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">spec</span> <span class="ow">in</span> <span class="n">modules</span><span class="p">:</span>
            <span class="n">modname</span> <span class="o">=</span> <span class="n">parse_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>

            <span class="c1"># try to get all submodules</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">modspec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">modspec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ModuleNotFoundError</span><span class="p">(</span><span class="n">modname</span><span class="p">)</span>
                <span class="n">module_index</span><span class="p">[</span><span class="n">modname</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">modspec</span><span class="o">.</span><span class="n">submodule_search_locations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">modspec</span><span class="o">.</span><span class="n">submodule_search_locations</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Cannot find spec for </span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2"> (from </span><span class="si">{</span><span class="n">spec</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">submodules</span> <span class="o">=</span> <span class="n">pkgutil</span><span class="o">.</span><span class="n">walk_packages</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modname</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">module_index</span><span class="p">[</span><span class="nb">next</span><span class="p">(</span><span class="n">submodules</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Error importing subpackage: </span><span class="si">{</span><span class="n">e</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span>
                        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stdlib</span> <span class="o">=</span> <span class="n">sysconfig</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;stdlib&quot;</span><span class="p">)</span>
        <span class="n">platstdlib</span> <span class="o">=</span> <span class="n">sysconfig</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s2">&quot;platstdlib&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">pkgutil</span><span class="o">.</span><span class="n">iter_modules</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">module_finder</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="n">stdlib</span><span class="p">,</span> <span class="n">platstdlib</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">module_index</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">module_index</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No valid module specifications found in </span><span class="si">{</span><span class="n">modules</span><span class="si">!r}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">module_index</span>
</pre></div>

            </details>
                        
                        <div class="docstring"><p>This function processes a list of module specifications and returns the list of module names
that should be processed by pdoc.</p>

<p>There are two main scenarios:</p>

<ol>
<li>If <code>modules</code> is not empty, pdoc will return the names of all available submodules (and their submodules, recursively).</li>
<li>If the list of modules is empty, pdoc will enumerate all installed modules that are not part of the stdlib.</li>
</ol>
</div>
                        
                    </section>
                
                    <section id="parse_spec">
                        
                            <div class="attr function">
                <span class="def">def</span>
                <span class="name">parse_spec</span><span class="signature">(spec: Union[pathlib.Path, str]) -&gt; str</span>:
            
        </div>
                        
                        
                            <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This functions parses a user&#39;s module specification into a module identifier that can be imported.</span>
<span class="sd">    A module specification can either be the name of an installed module, or the path to a specific file or package.</span>
<span class="sd">    For example, the following strings are valid module specifications:</span>

<span class="sd">     - typing</span>
<span class="sd">     - collections.abc</span>
<span class="sd">     - ./test/snapshots/demo_long.py</span>
<span class="sd">     - ./test/snapshots/demopackage</span>

<span class="sd">    *This function has side-effects:* `sys.path` will be amended if the specification is a path.</span>
<span class="sd">    If this side-effect is undesired, pass a module name instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># isinstance check is required as Path is not iterable.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="ow">in</span> <span class="n">spec</span> <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">altsep</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">altsep</span> <span class="ow">in</span> <span class="n">spec</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">spec</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">parse_spec</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">spec</span><span class="o">.</span><span class="n">stem</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">spec</span>
</pre></div>

            </details>
                        
                        <div class="docstring"><p>This functions parses a user's module specification into a module identifier that can be imported.
A module specification can either be the name of an installed module, or the path to a specific file or package.
For example, the following strings are valid module specifications:</p>

<ul>
<li>typing</li>
<li>collections.abc</li>
<li>./test/snapshots/demo_long.py</li>
<li>./test/snapshots/demopackage</li>
</ul>

<p><em>This function has side-effects:</em> <code>sys.path</code> will be amended if the specification is a path.
If this side-effect is undesired, pass a module name instead.</p>
</div>
                        
                    </section>
                
                    <section id="load_module">
                        
                            <div class="attr function"><div class="decorator">@mock_some_common_side_effects()</div>
                <span class="def">def</span>
                <span class="name">load_module</span><span class="signature">(module: str) -&gt; module</span>:
            
        </div>
                        
                        
                            <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="nd">@mock_some_common_side_effects</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">load_module</span><span class="p">(</span><span class="n">module</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to import a module. If import fails, a RuntimeError is raised.</span>

<span class="sd">    Returns the imported module.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error importing </span><span class="si">{</span><span class="n">module</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
</pre></div>

            </details>
                        
                        <div class="docstring"><p>Try to import a module. If import fails, a RuntimeError is raised.</p>

<p>Returns the imported module.</p>
</div>
                        
                    </section>
                
                    <section id="module_mtime">
                        
                            <div class="attr function">
                <span class="def">def</span>
                <span class="name">module_mtime</span><span class="signature">(modulename: str) -&gt; Optional[float]</span>:
            
        </div>
                        
                        
                            <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">module_mtime</span><span class="p">(</span><span class="n">modulename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Returns the time the specified module file was last modified, or `None` if this cannot be determined.</span>
<span class="sd">    The primary use of this is live-reloading modules on modification.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">spec</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="n">modulename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">spec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">spec</span><span class="o">.</span><span class="n">origin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mtime</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>

            </details>
                        
                        <div class="docstring"><p>Returns the time the specified module file was last modified, or <code>None</code> if this cannot be determined.
The primary use of this is live-reloading modules on modification.</p>
</div>
                        
                    </section>
                
                    <section id="invalidate_caches">
                        
                            <div class="attr function">
                <span class="def">def</span>
                <span class="name">invalidate_caches</span><span class="signature">(modules: Collection[str]) -&gt; NoneType</span>:
            
        </div>
                        
                        
                            <details>
                <summary class="button">View Source</summary>
                <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">invalidate_caches</span><span class="p">(</span><span class="n">modules</span><span class="p">:</span> <span class="n">Collection</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Invalidate all module caches to allow live-reloading of modules.</span>
<span class="sd">    Getting this right is tricky  we remove a bunch of stuff from `sys.modules`, which sometimes causes surprising</span>
<span class="sd">    side-effects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">importlib</span><span class="o">.</span><span class="n">invalidate_caches</span><span class="p">()</span>
    <span class="n">linecache</span><span class="o">.</span><span class="n">clearcache</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">mod</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">modules</span>
    <span class="p">}</span>
</pre></div>

            </details>
                        
                        <div class="docstring"><p>Invalidate all module caches to allow live-reloading of modules.
Getting this right is tricky  we remove a bunch of stuff from <code>sys.modules</code>, which sometimes causes surprising
side-effects.</p>
</div>
                        
                    </section>
                
            
        </main>
    </div>
    

</body>
</html>